(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2040:function(e,t,r){"use strict";var s,a;e.exports=(null==(s=r.g.process)?void 0:s.env)&&"object"==typeof(null==(a=r.g.process)?void 0:a.env)?r.g.process:r(6003)},5276:function(e,t,r){Promise.resolve().then(r.bind(r,1501))},1501:function(e,t,r){"use strict";r.r(t);var s=r(9268),a=r(6006),i=r(2040);t.default=e=>{let[t,r]=(0,a.useState)([]),[o,n]=(0,a.useState)({title:"",customerName:"",repairType:"General Maintenance",priority:"Medium",estimatedCost:""}),[l,c]=(0,a.useState)("All"),[d,u]=(0,a.useState)("All"),[m,p]=(0,a.useState)(!1),[h,x]=(0,a.useState)(null),g=["Low","Medium","High","Emergency"],f=["Pending","In Progress","Completed","On Hold"],b=i.env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api";(0,a.useEffect)(()=>{let e=async()=>{try{p(!0),x(null),console.log("Fetching repairs from:","".concat(b,"/v1/repairs"));let e=await fetch("".concat(b,"/v1/repairs"));if(!e.ok)throw Error("HTTP ".concat(e.status,": ").concat(e.statusText));let t=await e.json();console.log("Fetched data:",t),r(Array.isArray(t)?t:[])}catch(e){console.error("Failed to fetch repair jobs",e),x(e instanceof Error?e.message:"Failed to fetch repairs")}finally{p(!1)}};e()},[]);let y=async e=>{if(e.preventDefault(),!o.title.trim()||!o.customerName.trim()){x("Title and Customer Name are required");return}let t={...o,status:"Pending",dateAdded:new Date().toLocaleDateString(),description:o.title};try{p(!0),x(null),console.log("Sending repair data:",t);let e=await fetch("".concat(b,"/v1/repairs"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(console.log("Response status:",e.status),!e.ok){let t=await e.text();throw console.error("Error response:",t),Error("HTTP ".concat(e.status,": ").concat(t))}let s=await e.json();console.log("Created job:",s);let a=await fetch("".concat(b,"/v1/repairs"));if(a.ok){let e=await a.json();r(Array.isArray(e)?e:[])}n({title:"",customerName:"",repairType:"General Maintenance",priority:"Medium",estimatedCost:""})}catch(e){console.error("Failed to add repair job",e),x(e instanceof Error?e.message:"Failed to add repair")}finally{p(!1)}},v=async(e,s)=>{try{x(null);let a=await fetch("".concat(b,"/v1/repairs/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})});if(!a.ok)throw Error("HTTP ".concat(a.status,": ").concat(a.statusText));let i=await a.json(),o=t.map(t=>t.id===e?i:t);r(o)}catch(e){console.error("Failed to update job status",e),x("Failed to update job status")}},j=async e=>{if(confirm("Are you sure you want to delete this repair job?"))try{x(null),console.log("Deleting job with ID:",e);let s=await fetch("".concat(b,"/v1/repairs/").concat(e),{method:"DELETE"});if(!s.ok){let e=await s.text();throw Error("HTTP ".concat(s.status,": ").concat(e))}r(t.filter(t=>t.id!==e))}catch(e){console.error("Failed to delete job",e),x("Failed to delete job")}},w=t.filter(e=>{let t="All"===l||e.status===l,r="All"===d||e.priority===d;return t&&r}),N=e=>{switch(e){case"Emergency":return"bg-red-500 text-white";case"High":return"bg-orange-500 text-white";case"Medium":return"bg-yellow-500 text-white";case"Low":return"bg-green-500 text-white";default:return"bg-gray-500 text-white"}},T=e=>{switch(e){case"Completed":return"bg-green-100 border-green-300";case"In Progress":return"bg-blue-100 border-blue-300";case"On Hold":return"bg-yellow-100 border-yellow-300";default:return"bg-gray-100 border-gray-300"}};return(0,s.jsxs)("div",{className:"max-w-6xl mx-auto p-4",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"\uD83D\uDD27 QuickFix Repair Shop"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Professional Repair Management System"})]}),h&&(0,s.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[(0,s.jsx)("strong",{children:"Error:"})," ",h,(0,s.jsx)("button",{onClick:()=>x(null),className:"float-right text-red-500 hover:text-red-700",children:"\xd7"})]}),m&&(0,s.jsx)("div",{className:"text-center py-4",children:(0,s.jsx)("div",{className:"text-blue-600",children:"Loading..."})}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Add New Repair Job"}),(0,s.jsxs)("form",{onSubmit:y,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"repair-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Repair Description *"}),(0,s.jsx)("input",{id:"repair-title",name:"title",placeholder:"e.g., Fix leaking pipe, Replace broken outlet",className:"w-full border border-gray-300 p-2 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",type:"text",value:o.title,onChange:e=>n({...o,title:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"customer-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name *"}),(0,s.jsx)("input",{id:"customer-name",name:"customerName",placeholder:"Customer name",className:"w-full border border-gray-300 p-2 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",type:"text",value:o.customerName,onChange:e=>n({...o,customerName:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"repair-type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Repair Type"}),(0,s.jsx)("select",{id:"repair-type",name:"repairType",className:"w-full border border-gray-300 p-2 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:o.repairType,onChange:e=>n({...o,repairType:e.target.value}),children:["Plumbing","Electrical","Appliance Repair","HVAC","General Maintenance","Emergency Repair"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),(0,s.jsx)("select",{id:"priority",name:"priority",className:"w-full border border-gray-300 p-2 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:o.priority,onChange:e=>n({...o,priority:e.target.value}),children:g.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"estimated-cost",className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Cost ($)"}),(0,s.jsx)("input",{id:"estimated-cost",name:"estimatedCost",placeholder:"Optional",className:"w-full border border-gray-300 p-2 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",type:"number",min:"0",step:"0.01",value:o.estimatedCost,onChange:e=>n({...o,estimatedCost:e.target.value})})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white p-2 rounded-md font-medium transition-colors",children:m?"Adding...":"Add Repair Job"})})]})]}),(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"filter-status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Status"}),(0,s.jsxs)("select",{id:"filter-status",name:"filterStatus",className:"border border-gray-300 p-2 rounded-md",value:l,onChange:e=>c(e.target.value),children:[(0,s.jsx)("option",{value:"All",children:"All Statuses"}),f.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"filter-priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Priority"}),(0,s.jsxs)("select",{id:"filter-priority",name:"filterPriority",className:"border border-gray-300 p-2 rounded-md",value:d,onChange:e=>u(e.target.value),children:[(0,s.jsx)("option",{value:"All",children:"All Priorities"}),g.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",w.length," of ",t.length," jobs"]})})]})}),(0,s.jsx)("div",{className:"space-y-4",children:w.length>0?w.map(e=>(0,s.jsx)("div",{className:"p-6 rounded-lg border-2 ".concat(T(e.status)," transition-all hover:shadow-md"),children:(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:e.title}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(N(e.priority)),children:e.priority})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 text-sm text-gray-600",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Customer:"})," ",e.customerName]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Type:"})," ",e.repairType]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Date Added:"})," ",e.dateAdded]}),e.estimatedCost&&(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Est. Cost:"})," $",e.estimatedCost]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,s.jsx)("select",{className:"border border-gray-300 p-2 rounded-md text-sm",value:e.status,onChange:t=>v(e.id,t.target.value),"aria-label":"Update status for ".concat(e.title),children:f.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)("button",{onClick:()=>j(e.id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-md text-sm font-medium transition-colors","aria-label":"Delete repair job: ".concat(e.title),children:"Delete"})]})]})},e.id)):(0,s.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow-md",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD27"}),(0,s.jsx)("p",{className:"text-gray-500 text-lg",children:"No repair jobs to display"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Add your first repair job above to get started!"})]})}),t.length>0&&(0,s.jsx)("div",{className:"mt-8 grid grid-cols-2 md:grid-cols-4 gap-4",children:f.map(e=>{let r=t.filter(t=>t.status===e).length;return(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:r}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:e})]},e)})})]})}},6003:function(e){!function(){var t={229:function(e){var t,r,s,a=e.exports={};function i(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function n(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l=[],c=!1,d=-1;function u(){c&&s&&(c=!1,s.length?l=s.concat(l):d=-1,l.length&&m())}function m(){if(!c){var e=n(u);c=!0;for(var t=l.length;t;){for(s=l,l=[];++d<t;)s&&s[d].run();d=-1,t=l.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new p(e,t)),1!==l.length||c||n(m)},p.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},r={};function s(e){var a=r[e];if(void 0!==a)return a.exports;var i=r[e]={exports:{}},o=!0;try{t[e](i,i.exports,s),o=!1}finally{o&&delete r[e]}return i.exports}s.ab="//";var a=s(229);e.exports=a}()},3177:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=r(6006),a=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var s,l={},c=null,d=null;for(s in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,s)&&!n.hasOwnProperty(s)&&(l[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===l[s]&&(l[s]=t[s]);return{$$typeof:a,type:e,key:c,ref:d,props:l,_owner:o.current}}t.jsx=l,t.jsxs=l},9268:function(e,t,r){"use strict";e.exports=r(3177)}},function(e){e.O(0,[253,769,744],function(){return e(e.s=5276)}),_N_E=e.O()}]);